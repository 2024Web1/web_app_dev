# ミニショップ4

- [ミニショップ4](#ミニショップ4)
  - [特定の商品をカートから削除する](#特定の商品をカートから削除する)
    - [カート内の商品（cart\_list.php）の修正](#カート内の商品cart_listphpの修正)
    - [商品削除（cart\_delete.php）の作成](#商品削除cart_deletephpの作成)
    - [Cartクラス（cart.php）の修正](#cartクラスcartphpの修正)
    - [動作確認](#動作確認)

## 特定の商品をカートから削除する

この機能は次のファイルの修正・作成により実装する。

### カート内の商品（cart_list.php）の修正

カート内の商品の有無を確認し、

1. 商品がなければ... </br>
   「お客様のショッピングカートに商品はありません。」というメッセージを表示する。リンクは「ジャンル選択に戻る」だけとする。

2. 商品があれば... </br>
   一覧表を表示するが、次の修正が必要となる。
   - 一覧表の見出し行に「削除」欄を追加し、各商品の「削除」欄には「削除」ボタンを追加する。
   - 「削除」ボタンをクリックするとその商品の「商品番号」を「商品削除」(cart_delete.php)に送信する。リンクは「ジャンル選択に戻る」と「注文する」の２つを表示する。 （「注文する」のリンク先は、src\order\order_now.php のファイル）

### 商品削除（cart_delete.php）の作成

1. カート内の商品（cart_list.php）から送られてきた「商品番号」を受け取る。
2. Cartクラスのオブジェクトを生成。受け取った「商品番号」を引数として「商品削除メソッド」を呼び出す。
3. カート内の商品（cart_list.php）を読み込む。</br>
**＊商品削除(cart_delete.php)の作成については、ミニショップの「注文追加」（cart_add.php）のコードを参考に作成するとよい。**

### Cartクラス（cart.php）の修正

引数として受け取った「商品番号」をキーにテーブルcartから該当商品を削除する「商品削除メソッド」を 次の仕様で定義する。

```text
アクセス修飾子: public
メソッド名: deleteItem
引数: $ident （商品番号） 
戻り値: なし
```

<div style="page-break-before:always"></div>

### 動作確認

カート内に複数の商品を入れ、一つ一つ削除していき、最後にカート内に商品が入っていない状態とする。

1. カート内に２つの商品が入っている状態から、1つの商品を削除する。

![](./images/14/cart_list_display_2.png)

2. 残りの商品も削除する。

![](./images/14/cart_list_display_1.png)

<div style="page-break-before:always"></div>

3. カート内に商品がない場合の画面となる。「注文する」のリンクが無くなる。

![](./images/14/cart_list_display_0.png)

